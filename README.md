Ractor beta
===========

PHP micro-framework Ractor

Это простой и легкий Класс на 500 строк с комментариями. Framework Ractor хорошо подходит для небольших веб приложений.


##ПАРАМЕТРЫ:


```
$param['path'] = __DIR__;
```
Установка корня приложения. Обязательно если файл Rerec.php находиться в подкаталоге. 
    
```
$param['page404massage'] = 'сообщения для страниц 404';
```
Сообщения для виртуальной страницы 404. Строка может быть сложной, с HTML кодом. Параметр используеться если не указан параметр "page404". Не обезательно.

```
$param['page404'] = 'not-found';
```
Пользовательская страница 404. Параметр URL роутер. Не обезательно.
    
```
$param['domin'] = "www.my-sitw.com";
```
Если сервер настроен не правельно можнт возникнуть проблемы с некоторыми методами класса. 
В такому случаи нужно задать доменное имя. Не обезательно.
    
```
$param['flashKey'] = '_mykey';
```
Ключ для сессий при методе flash. Не обезательно.

    

##СВОЙСТВА:


#### urlHost 
содержит имя домена

Пример:
```
$hostName = $Re->urlHost; // dev-ready.loc
```


#### url
содержить URL приложения

Пример:
```
$url = $Re->url; // http://dev-ready.loc/poliApps/ractorPro
```


#### pathRoot
содержить абсолютный путь к директории

Пример:
```
$root = $Re->pathRoot; // Для WIN E:\SERVER\domains\dev-ready.loc\poliApps\ractorPro
```


##МЕТОДЫ:


#### re()

Роутер, основной инструмен класса, осуществляет переходы по URL с загрузкой определенных функций

Пример:
```
$Re->re('/hello', function() {
    echo "Hello World";
});
```


#### getInstance()

Статический метод доступу к классу.


#### run()

Запуск класса, метод должен быть вызван в конце скрипта. Обезательно.


#### path([domin])

Принимает домен. только для внутренего использования.


#### thisUrl()

Возвращает текущий URL адрес


#### redirect([url] [,code] [,delay])

Делает редирект. Работает только через заголовки.

- `$url`    - примисает отностиельный от корня приложения адрес запроса
- `$code`   - код заголовка
- `$delay`  - рефреш с задержкой. принимает int в секундах

Пример:
```
$Re->redirect("/admin/login");
```


#### error([code] [,callback = null)

Устанавлевает выполнение функции для кода заголовка ошибки

Пример:
```
function error405($masseg = null){
    echo " call anyone " . $masseg;
}
$Re->error("400", "error405");

$Re->halt(400, 'Ошибка видна только в созданых функциях обработки');
```

#### halt([code] [,$message])

Останавлевает текущий запрос. Сожет принимать код ошибки, который затем обрабатываеться, как на примере выше, и сообщение.


#### http_status(code)

Возвращает статус HTTP заголовка поп его коду. Для внутренего использования.


#### apply(callable [, $args_array])

Вызов функции с аргументами в массиве. Для внутренего использования и не только.


#### call(callable [, $arg])

Вызов функции с аргументами. Для внутренего использования и не только.


#### add_action(event, callback)

Хук. Возвращает или задает обработчиков событий. Два аргумента $event имя события должно быть уже зарегестирировано методом exec_action()
и $callback функция для обработки, которая вызываеться в месте устанвки метода exec_action() с одноименным аргументом.
Возвращает NULL для незарегистированых имен.
Пример:
```
$route->add_action("action_name", "my_foo");
```


#### exec_action(event)

Хук. Назначения и установка позиции выполнения обработчиков событий.

Пример:
```
    $route->exec_action("action_name");
    function my_foo(){
        echo " my_foo ! ";
    }
```


#### before(callback)

Регистрация функции для обратного вызова. Обрабатываеться событие до роутинга.

Пример:
```
    $route->before("action_foo_before");
    function action_foo_before(){
        echo "<h1>action_foo_before</h1>";
    }
```


#### after(callback)

Регистрация функции для обратного вызова. Обрабатываеться событие после роутинга.

Пример:
```
    $route->after("action_foo_after");
    function action_foo_after(){
        echo "<h1>action_foo_after</h1>";
    }
```


#### flash(key [, $value] [, $keep])

Вспышка. используеться для одноразовой передачи сообщения на следующий запрос. Использует сесию и после запись удаляет или хранит.


